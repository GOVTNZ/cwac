{% extends 'layout.html' %}

{% block body %}
  <h1>Configs</h1>

  <nav aria-label="breadcrumb" class="mt-5">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{{ url_for('root') }}">Home</a></li>
      <li class="breadcrumb-item active" aria-current="page">Configure CWAC</li>
    </ol>
  </nav>

  <a class="btn btn-primary btn-sm" href="{{ url_for('new_config') }}"
    >New config</a
  >

  <div>
    {% if files|length != 0 %}
      <ol class="list-group">
        {% for file in files %}
          <li
            class="list-group-item d-flex align-items-center justify-content-between rounded-pill my-2"
          >
            <pre class="m-0 ms-2">{{ file }}</pre>
            <div>
              {% set filename = file.removesuffix('.json') %}
              <a
                href="{{ url_for('edit_config', filename=filename) }}"
                class="btn btn-primary"
                >Edit</a
              >
              <button
                class="btn btn-danger config-delete"
                data-filename="{{ filename }}"
              >
                Delete
              </button>
            </div>
          </li>
        {% endfor %}
      </ol>
    {% else %}
      No config files found
    {% endif %}
  </div>

  <script src="/static/configs_delete.js"></script>
{% endblock %}
