{% extends 'layout.html' %}

{% set intro_title = 'View raw results' %}
{% set intro_subtitle = 'View and download the raw results of previous scans, and how they were set up to run.' %}

{% block body %}
  <nav aria-label="breadcrumb" class="mt-5">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{{ url_for('root') }}">Home</a></li>
      <li class="breadcrumb-item active" aria-current="page">
        Download results
      </li>
    </ol>
  </nav>

  <div class="col-lg-8 px-0">
    {% include '_details_controls.html' %}

    {% for result in results %}
      <details class="my-3">
        <summary>
          <h5 class="d-inline-block">results/{{ result['name'] }}</h5>
        </summary>

        {% if result['files']|length != 0 %}
          <ol class="list-group">
            {% for file in result['files'] %}
              <li class="list-group-item">
                <a
                  href="{{ url_for('download_result_file', name=result['name'], file=file) }}"
                  >{{ file }}</a
                >
              </li>
            {% endfor %}
          </ol>
        {% else %}
          No files found
        {% endif %}
      </details>
    {% else %}
      No results found
    {% endfor %}
  </div>
{% endblock %}
